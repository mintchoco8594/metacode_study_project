# metacode_study_project
# 메타코드 스터디 실습프로젝트

## 프로젝트 개요: Pokémon Battle Simulation Chat API

### 1. 한줄 소개
포켓몬 배틀 지식 중 **정답이 고정된 영역(타입 상성 등)**은 룰 엔진으로 100% 결정하고,  
설명·요약·맥락 보강은 **RAG 기반 LLM**이 담당하는 하이브리드 Pokémon 배틀 챗봇 & 시뮬레이션 시스템.

거기에 나아가 구현된 AI 시스템을 활용하여 게임이라는 주제에 부합하도록 포켓몬 게임 시뮬레이션을 구현하여 멀티플레이 웹 게임 서버를 러프하게 구현.

### 2. 목표
- LLM이 자주 틀리는 **결정적 문제 영역(타입 상성, 배율 계산 등)**을  
  코드 기반 룰 엔진으로 통제하여 환각을 원천 차단한다.

- 공개 데이터셋(Kaggle)을 활용해 **데이터 수집 비용 없이 실전 RAG 파이프라인을 구현**한다.

- 단순 챗봇이 아닌, **실시간 상호작용이 가능한 게임 형태의 AI 웹 서비스**를 구현한다.

### 3. 핵심 기능 (MVP)
(1) 사용자 입력 질문에 따라 포켓몬에 대한 정보를 RAG를 통해 검색 후 LLM으로 답변을 생성하여 리턴

(2) 룰 엔진 기반 타입 상성 Q&A  
→ **배율/유불리는 LLM이 아닌 룰 엔진이 단독으로 계산**  
→ LLM은 계산 결과를 설명하는 역할만 수행

예)
“이상해씨 상대로 유리한 타입 알려줘”

“불꽃 타입이 강한/약한 타입은?”

“물/땅 복합 타입 상대로 전기 기술이 몇 배?”

→ 룰 엔진이 배율 계산을 확정하고, LLM은 결과 해설만 담당

**Why Rule Engine + RAG?**
- LLM은 타입 상성처럼 **정답이 고정된 문제에서 자주 오류를 발생**
- 본 프로젝트는 해당 영역을 룰 엔진으로 분리하여
  - 계산은 deterministic
  - 설명은 generative
  한 구조로 설계

(3) 멀티플레이어 웹 게임 플레이가 가능한 웹 소프트웨어
두명까지 참여 가능한 방에 입장 후, 싱글플레이 선택 혹은 상대방 입장시 사용할 포켓몬을 채팅으로 입력
입력이 완료되면 선택한 포켓몬의 상성을 계산한 후 결과를 채팅으로 반환하는 LLM 활용 텍스트 기반 시뮬레이션 게임

## 4. 확장 가능성
데이터셋 확장으로 더 많은 종류의 포켓몬을 추가 등록하거나, 소지도구 또는 특성까지 포함하여 상성을 계산한다면 더욱 실제와 비슷하게 시뮬레이션 제공 가능
배틀 내용 및 결과를 프롬프트에 입력하여 이미지 혹은 비디오 생성 AI로 시각적 결과를 제공


## 5. 데이터 소스
The Complete Pokédex Dataset by Cristobal Mitchell,
Pokemon Pokedex with Stats by Kumar Arnav 
-1세대 포켓몬 대상으로 사용할 데이터만 추출하여 정제 후 상성 분석/정량 계산용으로 사용

벡터DB 인덱싱 대상:
1세대 포켓몬의 이름, 타입, 종족값

## 6. 시스템 아키텍처
### 챗봇 파이프라인
1. Streamlit 인터페이스로 사용자 질문 입력
2. KeyBERT로 포켓몬/타입 관련 키워드 추출
3. 추출 키워드 기반 RAG 검색 (FAISS)
4. 질문 유형 판별
   - 정보 질문 → RAG + LLM
   - 룰 질문 → Rule Engine 단독 계산
5. 룰 엔진 결과(structured output) 생성
6. RAG 근거 + 룰 엔진 결과를 포함한 LLM 프롬프트 생성
7. LLM을 통한 자연어 답변 생성 (한글/영문 자동 대응)

### 게임 파이프라인
1.웹소켓을 통한 실시간 서버 정보 수신
2.방 입장, 싱글플레이 버튼 클릭 혹은 상대 플레이어 입장시 자동으로 시작
3.플레이어당 3개의 목숨, 채팅으로 사용할 포켓몬 입력
4.두 플레이어 입력 완료시 RAG로 포켓몬 관련 내용 조회
5.룰 엔진으로 선택 포켓몬 간의 상성 계산
6.결정값에 따른 LLM 프롬프트 생성
7.LLM을 통한 답변 문장 생성(입력언어에 따라 한글, 영문 답변)
8.승패에 따라 목숨 차감, 다음 라운드 진행
9.목숨이 전부 차감된 플레이어는 패배처리

※ 게임 로직의 승패 판단은 룰 엔진이 담당하며,  
LLM은 매 라운드 결과를 **해설자 역할**로 자연어 설명한다.

## 7. 기술 스택

Python, FastAPI, Langchain, KeyBert

Vector DB: FAISS

Embedding: all-MiniLM-L6-v2

## 8. 평가 방법
- 룰 질문: 배율/유불리 계산은 코드로 확정 → 정답 정확도 100%
- LLM 답변: 근거(EVIDENCE) 기반 프롬프트 강제 → 환각 발생률 0% 목표

## 9. 데모 시나리오
"리자몽이랑 거북왕이 싸우면 누가 이기지?

"피카츄가 뭐야?"

“리자몽 상대로 유리한 타입 추천해줘(이유 포함)”

“전기 기술이 땅 타입에 왜 안 통함?”